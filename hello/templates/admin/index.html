{% extends "admin/base_site.html" %}
{% load static %}
{% load usage_filters %}


{% block content %}
<h1 style="text-align:right;">ğŸ“Š Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¯ÛŒØ±ÛŒØªÛŒ</h1>

<div style="direction:rtl;">

  <h2>Ù…ØµØ±Ù Ø±ÙˆØ²Ø§Ù†Ù‡ (Û· Ø±ÙˆØ² Ø§Ø®ÛŒØ±)</h2>
  <canvas id="dailyChart" height="100"></canvas>

  <h2 style="margin-top:40px;">Ù…ØµØ±Ù Ù…Ø§Ù‡Ø§Ù†Ù‡ (Û· Ù…Ø§Ù‡ Ø§Ø®ÛŒØ±)</h2>
  <canvas id="monthlyChart" height="100"></canvas>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


<script>
const dailyLabels = [
  {% for d in daily %}
    "{{ d.date }}",
  {% endfor %}
];
const dailyData = [
  {% for d in daily %}
    {{ d.total_bytes_used|bytes_to_mb }},
  {% endfor %}
];
const monthlyLabels = [
  {% for m in monthly %}
    "{{ m.year }}/{{ m.month }}",
  {% endfor %}
];
const monthlyData = [
  {% for m in monthly %}
    {{ m.total_bytes_used }},
  {% endfor %}
];

new Chart(document.getElementById('dailyChart'), {
  type: 'bar',
  data: { labels: dailyLabels, datasets: [{ label: 'Ù…ØµØ±Ù Ø±ÙˆØ²Ø§Ù†Ù‡ (Ø¨Ø§ÛŒØª)', data: dailyData, backgroundColor: 'rgba(54,162,235,0.6)' }] },
  options: { scales: { y: { beginAtZero: true } } }
});

new Chart(document.getElementById('monthlyChart'), {
  type: 'bar',
  data: { labels: monthlyLabels, datasets: [{ label: 'Ù…ØµØ±Ù Ù…Ø§Ù‡Ø§Ù†Ù‡ (Ø¨Ø§ÛŒØª)', data: monthlyData, backgroundColor: 'rgba(255,99,132,0.6)' }] },
  options: { scales: { y: { beginAtZero: true } } }
});
</script>
<h3>ğŸ§ª ØªØ³Øª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ:</h3>
{% for d in daily %}
  <p>{{ d.date }} â†’ {{ d.total_bytes_used }} bytes â†’ {{ d.total_bytes_used|bytes_to_mb }} MB</p>
{% endfor %}
{% endblock %}